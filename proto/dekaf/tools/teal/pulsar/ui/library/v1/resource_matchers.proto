syntax = "proto3";

package tools.teal.pulsar.ui.library.v1;

message ExactTenantMatcher {
  string tenant = 1;
}

message RegexTenantMatcher {
  string tenant_regex = 1;
}

message TenantMatcher {
  oneof matcher {
    ExactTenantMatcher exact = 1;
    RegexTenantMatcher regex = 2;
  }
}

message ExactNamespaceMatcher {
  TenantMatcher tenant = 1;
  string namespace = 2;
}

message RegexNamespaceMatcher {
  TenantMatcher tenant = 1;
  string namespace_regex = 2;
}

message NamespaceMatcher {
  oneof matcher {
    ExactNamespaceMatcher exact = 1;
    RegexNamespaceMatcher regex = 2;
  }
}

enum TopicPersistency {
  TOPIC_PERSISTENCY_UNSPECIFIED = 0;
  TOPIC_PERSISTENCY_NON_PERSISTENT = 1;
  TOPIC_PERSISTENCY_PERSISTENT = 2;
  TOPIC_PERSISTENCY_ANY = 3;
}

message ExactTopicMatcher {
  TopicPersistency persistency = 1;
  NamespaceMatcher namespace = 2;
  string topic = 3;
}

message RegexTopicMatcher {
  TopicPersistency persistency = 1;
  NamespaceMatcher namespace = 2;
  string topic_regex = 3;
}

message TopicMatcher {
  oneof matcher {
    ExactTopicMatcher exact = 1;
    RegexTopicMatcher regex = 2;
  }
}

message ResourceMatcher {
  oneof matcher {
    TenantMatcher tenant = 1;
    NamespaceMatcher namespace = 2;
    TopicMatcher topic = 3;
  }
}

